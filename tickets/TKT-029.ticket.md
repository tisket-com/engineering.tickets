---
status: open
priority: medium
created: 2026-01-30
---
# TKT-029: Restructure and standardize route naming conventions

## Overview

Restructure the app's routing to follow a consistent, hierarchical naming convention and use file extensions to determine which component renders content.

## Proposed Route Structure

```
/workspace/projects/<repo_name>/<file_path>
/workspace/teams/<repo_name>/<file_path>
```

## Extension-Based Component Rendering

Use file extensions to determine which component renders the content:

| Extension | Component | Notes |
|-----------|-----------|-------|
| `*.ticket.md` | TicketViewer | Requires renaming existing tickets |
| `*.board.yaml` | KanbanBoard | Already uses this pattern |
| `*.timeline.yaml` | TimelineViewer | Already uses this pattern |
| `*.report.yaml` | ReportViewer | Already uses this pattern |
| `*.md` | DocViewer | Catch-all for documentation |

## Goals

- Establish clear separation between projects and teams in the URL structure
- Use consistent naming patterns across all routes
- Make URLs more intuitive and predictable
- Support file path navigation within repositories
- Simplify routing logic with extension-based component selection

## Feasibility Assessment

### Route Restructuring ✅ Straightforward
- TanStack Router splat routes already support `$repoSlug/$` pattern
- Consolidates 4 content-type routes into 2 repo-type routes
- No architectural blockers

### Extension-Based Rendering ✅ Feasible with migration
- Pattern already exists partially in docs route
- Requires decision on ticket file naming:
  - **Option A:** Rename `TKT-001.md` → `TKT-001.ticket.md` (cleaner, explicit)
  - **Option B:** Detect by frontmatter schema (status/priority/assignee fields)
  - **Option C:** Detect by folder location (`tickets/` directory)

**Recommendation:** Option A (`.ticket.md` extension) is cleanest - makes file type explicit regardless of location and simplifies routing logic.

### Migration Considerations

If adopting Option A (`.ticket.md` extension), files need to be renamed in multiple locations:
- **Git repositories** (remote) - source of truth
- **MCP server local clones** - worktrees on disk need to pull changes or be re-cloned
- **Browser client caches** - LightningFS stores will need to fetch updated refs

Consider a migration strategy that either:
1. Renames files in git and forces fresh clones/fetches everywhere
2. Supports both old and new extensions during a transition period

## Tasks

- [ ] Audit current route structure
- [ ] Design new route hierarchy
- [ ] Decide on ticket file naming convention
- [ ] Update route definitions
- [ ] Update all internal links and navigation
- [ ] Update ticket creation to use new extension (MCP `create_ticket` tool)
- [ ] Migrate existing ticket files in git repositories
- [ ] Handle MCP server local clone updates
- [ ] Handle browser client cache invalidation
- [ ] Add redirects from old routes if needed
- [ ] Update any documentation referencing routes
